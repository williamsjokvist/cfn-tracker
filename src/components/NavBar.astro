---
import WithTooltip from "./WithTooltip.astro";
import Icon from "astro-icon";

const NavItems = [
  {
    href: "/getting-started",
    name: "Getting Started",
    icon: Astro.url.pathname.includes("getting-started")
      ? "akar-icons:info-fill"
      : "akar-icons:info",
    bold: Astro.url.pathname.includes("getting-started"),
    color: "#fe3958",
  },
  {
    href: "/faq",
    name: "FAQ",
    icon: Astro.url.pathname.includes("faq")
      ? "mdi:chat-bubble"
      : "mdi:chat-bubble-outline",
    bold: Astro.url.pathname.includes("faq"),
    color: "#e92bb6",
  },
  {
    href: "/theme-guide",
    name: "Theme Guide",
    icon: Astro.url.pathname.includes("theme-guide")
      ? "fluent:paint-brush-16-filled"
      : "fluent:paint-brush-16-regular",
    bold: Astro.url.pathname.includes("theme-guide"),
    color: "#fbb03d",
  },
  {
    href: "/changelog",
    name: "Changelog",
    icon: Astro.url.pathname.includes("changelog")
      ? "mdi:scroll"
      : "mdi:scroll-outline",
    bold: Astro.url.pathname.includes("changelog"),
    color: "#8afb3d",
  },
];
---

<script>
  import { gsap, Power3 } from "../lib/gsap";

  document.addEventListener("astro:page-load", () => {

    const opts = {
      autoAlpha: 0,
      translateY: -20,
      duration: 2.75,
      ease: Power3.easeOut,
      stagger: .75
    }

    gsap.from("#nav-item-container > *", opts)

    gsap.from("#socials-container > *", {
      ...opts,
      delay: 2
    });

  }, { once: true })
</script>

<header
  class="bg-[#310a65] sm:bg-transparent text-gray-300 sticky top-0 sm:top-4 flex justify-between mx-auto w-full z-50 p-1 px-4 lg:px-8"
>
  <nav class="flex items-center lowercase gap-2 lg:gap-6 xl:gap-10">
    <a href="/">
      <img
        src="https://raw.githubusercontent.com/williamsjokvist/cfn-tracker/master/build/appicon.png"
        class="w-12 sm:w-14"
        alt="CFN Tracker logo"
      />
    </a>
    <ul
      id="nav-item-container"
      class="flex items-start justify-around w-full lg:gap-10 text-sm sm:text-xs md:text-lg font-semibold"
    >
      {
        NavItems.map(({ href, icon, name, bold, color }) => (
          <li class="hover:text-gray-600 dark:hover:text-white">
            <a
              href={href}
              class={`text-center flex flex-col sm:flex-row  bg-[#310a65] hover:bg-[#601099] transition-colors rounded-md lg:rounded-2xl py-1 px-3 items-center justify-between sm:gap-2 ${
                bold ? "text-bold" : "font-normal"
              }`}
            >
              <Icon
                name={icon}
                width="24"
                class="justify-self-center"
                style={{ color }}
              />
              <span class="">
                {name}
              </span>
            </a>
          </li>
        ))
      }
    </ul>
  </nav>

  <div id="socials-container" class="flex right-0 top-full absolute sm:relative mt-2 mr-2 sm:mt-0 sm:mr-0 items-center gap-1 sm:gap-1 md:gap-2 lg:gap-6">
    <WithTooltip label="Twitter">
      <a
        class="flex gap-4 bg-[#310a65] hover:bg-[#601099] transition-colors p-3 rounded-full"
        href="https://twitter.com/greensoap_"
        target="_blank"
        aria-label="Twitter / X"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          class="md:w-6 md:h-6"
          ><path
            fill="currentColor"
            d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584l-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932ZM17.61 20.644h2.039L6.486 3.24H4.298Z"
          ></path></svg
        >
      </a>
    </WithTooltip>

    <WithTooltip label="Source">
      <a
        class="flex gap-4 bg-[#310a65] hover:bg-[#601099] transition-colors p-[.625rem] md:p-3 rounded-full"
        href="https://github.com/williamsjokvist/cfn-tracker/"
        aria-label="Source"
        target="_blank"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 256 256"
          class="md:w-6 md:h-6"
        >
          <path
            fill="currentColor"
            d="M216 104v8a56.06 56.06 0 0 1-48.44 55.47A39.8 39.8 0 0 1 176 192v40a8 8 0 0 1-8 8h-64a8 8 0 0 1-8-8v-16H72a40 40 0 0 1-40-40a24 24 0 0 0-24-24a8 8 0 0 1 0-16a40 40 0 0 1 40 40a24 24 0 0 0 24 24h24v-8a39.8 39.8 0 0 1 8.44-24.53A56.06 56.06 0 0 1 56 112v-8a58.14 58.14 0 0 1 7.69-28.32A59.78 59.78 0 0 1 69.07 28A8 8 0 0 1 76 24a59.75 59.75 0 0 1 48 24h24a59.75 59.75 0 0 1 48-24a8 8 0 0 1 6.93 4a59.74 59.74 0 0 1 5.37 47.68A58 58 0 0 1 216 104Z"
          ></path>
        </svg>
      </a>
    </WithTooltip>
  </div>
</header>
